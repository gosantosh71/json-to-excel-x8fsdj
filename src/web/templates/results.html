{% extends 'base.html' %}
{% from 'macros/status_macros.html' import result_summary, download_button %}

{% block content %}
  <div class="results-header text-center mb-4">
    <h1 class="h3 mb-3">Conversion Complete</h1>
    <div class="success-icon mb-3">
      <i class="bi bi-check-circle-fill text-success fs-1"></i>
    </div>
    <p class="lead">Success! Your JSON file has been converted to Excel.</p>
  </div>

  <div class="results-container card shadow-sm">
    <div class="card-body">
      {{ result_summary(job) }}

      <div class="download-section text-center mt-4">
        {{ download_button(download_url, job.output_file_name) }}
      </div>
    </div>
  </div>

  <div class="action-buttons d-flex justify-content-center mt-4 gap-3">
    <a href="{{ url_for('index') }}" id="convert-another-btn" class="btn btn-primary convert-another-btn">Convert Another File</a>
  </div>
{% endblock %}

{% block scripts %}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Set up event listener for Convert Another button
      const convertAnotherBtn = document.getElementById('convert-another-btn');
      if (convertAnotherBtn) {
        convertAnotherBtn.addEventListener('click', function(event) {
          // Optional: Add analytics tracking for conversions
          console.log('User initiated another conversion');
        });
      }
    });
  </script>
{% endblock %}